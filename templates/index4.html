<!-- ssh 연결 시 popup 띄우고 서버 표시시 -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server SSH Login Test</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script>
        var socket = io();

        function openSSHPopup() {
            let serverip = document.getElementById('serverip').value;
            let username = document.getElementById('username').value;
            let password = document.getElementById('password').value;

            // 팝업 창 열기
            let sshWindow = window.open("", "SSH Window", "width=600,height=400");
            sshWindow.document.write("<h2>SSH Terminal</h2><pre id='ssh_output'></pre>");

            // WebSocket을 통해 SSH 연결 요청
            socket.emit('connect_ssh', {hostname: serverip, username: username, password: password});

            // 서버에서 받은 출력 표시
            socket.on('ssh_output', function(data) {
                let outputElement = sshWindow.document.getElementById('ssh_output');
                if (data.status === 'success') {
                    outputElement.innerHTML += data.message + "\n";
                } else {
                    outputElement.innerHTML += "Error: " + data.message + "\n";
                }
            });
        }
    </script>
</head>
<body>

    <h2>로그인</h2>

    <!-- POST 방식으로 SSH 연결 요청 -->
    <form onsubmit="connectSSH(event)">
        <label>HostIP :</label><br>
        <input type="text" id="serverip" name="serverip" value="----" required><br>

        <label>Username :</label><br>
        <input type="text" id="username" name="username" value="----" required><br>

        <label>Password :</label><br>
        <input type="password" id="password" name="password" value="----" required><br><br>

        <input type="submit" value="Access">
    </form>

</body>
</html>
